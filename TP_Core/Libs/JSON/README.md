### TP_Core/Libs/JSON

**Note:** For what it is now and subject to change. 

**Files/ClassMethods and Vars:**  

- JSON_Base.php: 	
	- public const ROOT_BLOCK_SELECTOR, VALID_ORIGINS, PRESETS_METADATA,PROPERTIES_METADATA 
	- public const PROTECTED_PROPERTIES,VALID_TOP_LEVEL_KEYS,VALID_SETTINGS,VALID_STYLES 
	- public const ELEMENTS,LATEST_SCHEMA 
	- protected $_theme_json 
	- protected static $_blocks_metadata, $_core, $_theme,$_theme_has_support
    - protected static $_user, $_user_custom_post_type_id, $_i18n_schema 
- TP_Theme_JSON.php: extends JSON_Base	
	- __construct( $theme_json = [], $origin = 'theme' ) 
	- _maybe_opt_in_into_settings( $theme_json ) static  
	- _do_opt_in_into_settings( &$context ): void static  
	- _sanitize( $input, $valid_block_names, $valid_element_names ) static  
	- _get_blocks_metadata() static  
	- _remove_keys_not_in_schema( $tree, $schema ) static  
	- get_settings() 
	- get_stylesheet( $types = ['variables', 'styles', 'presets'], $origins = null ): string  
	- get_custom_templates(): array  
	- get_template_parts(): array 
	- _get_block_classes( $style_nodes ): string 
	- _get_preset_classes( $setting_nodes, $origins ): string 
	- _get_css_variables( $nodes, $origins ): string 
	- _to_rule_set( $selector, $declarations ): string static  
	- _append_to_selector( $selector, $to_append ) static  
	- _compute_preset_classes( $settings, $selector, $origins ): string static  
	- _scope_selector( $scope, $selector ) static  
	- _get_settings_values_by_slug( $settings, $preset_metadata, $origins ): array static
	- _replace_slug_in_string( $input, $slug ) static 
	- _compute_preset_vars( $settings, $origins ): array static 
	- _compute_theme_vars( $settings ): array static 
	- _flatten_tree( $tree, $prefix = '', $token = '--' ) static 
	- _compute_style_properties( $styles, $settings = [], $properties = null ): array static 
	- _get_setting_nodes( $theme_json, $selectors = [] ): array static 
	- _get_style_nodes( $theme_json, $selectors = [] ): array static 
	- merge( $incoming ): void 
	- get_svg_filters( $origins ): string 
	- _should_override_preset( $theme_json, $path, $override ): bool static 
	- _get_default_slugs( $data, $node_path ): array static 
	- _get_name_from_defaults( $slug, $base_path ) static 
	- _filter_slugs( $node, $slugs ) static 
	- remove_insecure_properties( $theme_json ) static 
	- _remove_insecure_settings( $input ): array static 
	- _remove_insecure_styles( $input ): array static 
	- _is_safe_css_declaration( $property_name, $property_value ): bool static 
	- get_raw_data()
	- get_from_editor_settings( $settings ): array static 
- TP_Theme_JSON_Resolver.php: extends JSON_Base	
	- _read_json_file( $file_path ) static 
	- _translate_json( $theme_json, $domain = 'default' ): array static 
	- get_core_data() static 
	- get_theme_data( $deprecated = []): TP_Theme_JSON static 
	- get_user_data_from_tp_global_styles( $theme, $create_post = false, $post_status_filter = array( 'publish' ) ) static 
	- get_user_data(): TP_Theme_JSON static 
	- get_merged_data( $origin = 'custom' ): TP_Theme_JSON static 
	- get_user_global_styles_post_id() static 
	- theme_has_support() static 
	- _get_file_path_from_theme( $file_name, $template = false ): string static
	- clean_cached_data(): void static 
	- get_style_variations(): array static 
- TP_Theme_JSON_Schema.php: extends JSON_Base	
	- public const V1_TO_V2_RENAMED_PATHS 
	- migrate( $theme_json ) static 
	- migrate_v1_to_v2( $old ) static 
	- rename_paths( $settings, $paths_to_rename ) static 
	- rename_settings( &$settings, $paths_to_rename ): void static 
	- unset_setting_by_path( &$settings, $path ): void static 
